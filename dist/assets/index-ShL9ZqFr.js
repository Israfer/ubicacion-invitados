const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Scanner-De9dBjao.js","assets/vendor-CqRV3dHs.js","assets/ConfirmationScreen-Qy16Mcyd.js","assets/ConfirmationScreen-BLR3ecTh.css"])))=>i.map(i=>d[i]);
import{R as y,r,a as x,j as t,b as N}from"./vendor-CqRV3dHs.js";(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))u(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const n of s.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&u(n)}).observe(document,{childList:!0,subtree:!0});function d(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function u(e){if(e.ep)return;e.ep=!0;const s=d(e);fetch(e.href,s)}})();const w="modulepreload",P=function(m){return"/"+m},E={},b=function(l,d,u){let e=Promise.resolve();if(d&&d.length>0){document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),o=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));e=Promise.allSettled(d.map(c=>{if(c=P(c),c in E)return;E[c]=!0;const f=c.endsWith(".css"),h=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const i=document.createElement("link");if(i.rel=f?"stylesheet":w,f||(i.as="script"),i.crossOrigin="",i.href=c,o&&i.setAttribute("nonce",o),document.head.appendChild(i),f)return new Promise((S,v)=>{i.addEventListener("load",S),i.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(n){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=n,window.dispatchEvent(o),!o.defaultPrevented)throw n}return e.then(n=>{for(const o of n||[])o.status==="rejected"&&s(o.reason);return l().catch(s)})},R=y.lazy(()=>b(()=>import("./Scanner-De9dBjao.js"),__vite__mapDeps([0,1]))),_=y.lazy(()=>b(()=>import("./ConfirmationScreen-Qy16Mcyd.js"),__vite__mapDeps([2,1,3])));function L(){const[m,l]=r.useState(null),[d,u]=r.useState(null),[e,s]=r.useState(0),[n,o]=r.useState(!1),[c,f]=r.useState(!0),[h,i]=r.useState("1n_b8RZ7DkWNu-Ht0N-3hYKDhyapNVN8fMwSXb8fT8aU"),[S,v]=r.useState(!1),p=r.useCallback(async()=>{console.log("fetchGuestCount invocado");try{const a=await x.get(`undefined/total-ingresados?sheetId=${h}`);s(a.data.totalIngresados||0)}catch(a){console.error("Error obteniendo el conteo de invitados:",a)}},[h]);r.useEffect(()=>{p()},[p]);const C=r.useCallback(async a=>{if(a){l(a),o(!0),f(!1);try{const g=await x.post("undefined/registro-invitados",{qrData:a,sheetId:h});!g.data||!g.data.status?u({status:"invalid",message:"Datos no v치lidos"}):(u(g.data),await p())}catch(g){console.error("Error en la API:",g),u({status:"invalid",message:"Error de conexi칩n"})}finally{o(!1)}}},[h,p]),I=r.useCallback(()=>{l(null),u(null),f(!0)},[]);return t.jsxs("div",{className:"app-container",children:[t.jsx("h1",{className:"title",children:"Registro de Invitados"}),t.jsxs("div",{className:"menu-container",children:[t.jsx("button",{className:"sheet-button",onClick:()=>v(a=>!a),children:"游늯"}),S&&t.jsx("div",{className:"sheet-input-container",children:t.jsx("input",{type:"text",value:h,onChange:a=>i(a.target.value),placeholder:"ID de la Google Sheet"})})]}),t.jsxs("div",{className:"counter-container",children:[t.jsxs("h2",{children:["Invitados Ingresados: ",e]}),t.jsx("button",{className:"update-button",onClick:p,children:"游댃"})]}),n?t.jsxs("div",{className:"loading",children:[t.jsx("div",{className:"spinner"}),"Procesando..."]}):m?t.jsx(r.Suspense,{fallback:t.jsx("div",{children:"Cargando confirmaci칩n..."}),children:t.jsx(_,{guestData:d,onReset:I})}):c&&t.jsx(r.Suspense,{fallback:t.jsx("div",{children:"Cargando esc치ner..."}),children:t.jsx(R,{onScan:C})})]})}const j=document.getElementById("root");if(!j)throw new Error('No se encontr칩 el elemento con id "root"');N.createRoot(j).render(t.jsx(y.StrictMode,{children:t.jsx(L,{})}));
